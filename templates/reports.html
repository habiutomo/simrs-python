{% extends "index.html" %}

{% block page_title %}
<h1 class="h3">
    Laporan & Analitik
</h1>
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-primary shadow h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                            Total Kunjungan (Bulan Ini)</div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">1,254</div>
                    </div>
                    <div class="col-auto">
                        <i class="fas fa-calendar fa-2x text-gray-300"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-success shadow h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                            Pendapatan (Bulan Ini)</div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">Rp 325,000,000</div>
                    </div>
                    <div class="col-auto">
                        <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-info shadow h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                            Tingkat Hunian Rawat Inap</div>
                        <div class="row no-gutters align-items-center">
                            <div class="col-auto">
                                <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800">78%</div>
                            </div>
                            <div class="col">
                                <div class="progress progress-sm mr-2">
                                    <div class="progress-bar bg-info" role="progressbar" style="width: 78%"
                                        aria-valuenow="78" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-auto">
                        <i class="fas fa-bed fa-2x text-gray-300"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-warning shadow h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                            Waktu Tunggu Rata-rata</div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">32 menit</div>
                    </div>
                    <div class="col-auto">
                        <i class="fas fa-clock fa-2x text-gray-300"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-12 mb-4">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="card-title mb-0">Daftar Laporan</h5>
                <div>
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createReportModal">
                        <i class="fas fa-plus"></i> Buat Laporan Baru
                    </button>
                    <div class="btn-group">
                        <button type="button" class="btn btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-file-export"></i> Export
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#"><i class="fas fa-file-excel"></i> Excel</a></li>
                            <li><a class="dropdown-item" href="#"><i class="fas fa-file-csv"></i> CSV</a></li>
                            <li><a class="dropdown-item" href="#"><i class="fas fa-file-pdf"></i> PDF</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <div class="row g-2">
                        <div class="col-md-3">
                            <select class="form-select" id="reportCategoryFilter">
                                <option value="">Semua Kategori</option>
                                <option value="operational">Operasional</option>
                                <option value="financial">Keuangan</option>
                                <option value="clinical">Klinis</option>
                                <option value="inventory">Inventaris</option>
                                <option value="hr">Kepegawaian</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <select class="form-select" id="reportPeriodFilter">
                                <option value="">Semua Periode</option>
                                <option value="daily">Harian</option>
                                <option value="weekly">Mingguan</option>
                                <option value="monthly">Bulanan</option>
                                <option value="quarterly">Triwulan</option>
                                <option value="yearly">Tahunan</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <div class="input-group">
                                <input type="text" class="form-control" placeholder="Cari laporan..." id="searchReport">
                                <button class="btn btn-outline-secondary" type="button">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <select class="form-select" id="reportSort">
                                <option value="latest">Terbaru</option>
                                <option value="oldest">Terlama</option>
                                <option value="name_asc">Nama (A-Z)</option>
                                <option value="name_desc">Nama (Z-A)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-light">
                            <tr>
                                <th width="5%">No.</th>
                                <th width="25%">Nama Laporan</th>
                                <th width="15%">Kategori</th>
                                <th width="15%">Periode</th>
                                <th width="15%">Tanggal Dibuat</th>
                                <th width="10%">Format</th>
                                <th width="15%">Aksi</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>Laporan Kunjungan Rawat Jalan</td>
                                <td>Operasional</td>
                                <td>Bulanan</td>
                                <td>05-04-2025</td>
                                <td>PDF, Excel</td>
                                <td>
                                    <div class="btn-group">
                                        <a href="#" class="btn btn-sm btn-primary">
                                            <i class="fas fa-eye"></i>
                                        </a>
                                        <a href="#" class="btn btn-sm btn-info">
                                            <i class="fas fa-download"></i>
                                        </a>
                                        <a href="#" class="btn btn-sm btn-secondary">
                                            <i class="fas fa-envelope"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Laporan Pendapatan Rumah Sakit</td>
                                <td>Keuangan</td>
                                <td>Bulanan</td>
                                <td>05-04-2025</td>
                                <td>PDF, Excel</td>
                                <td>
                                    <div class="btn-group">
                                        <a href="#" class="btn btn-sm btn-primary">
                                            <i class="fas fa-eye"></i>
                                        </a>
                                        <a href="#" class="btn btn-sm btn-info">
                                            <i class="fas fa-download"></i>
                                        </a>
                                        <a href="#" class="btn btn-sm btn-secondary">
                                            <i class="fas fa-envelope"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Laporan 10 Penyakit Terbanyak</td>
                                <td>Klinis</td>
                                <td>Bulanan</td>
                                <td>05-04-2025</td>
                                <td>PDF, Excel</td>
                                <td>
                                    <div class="btn-group">
                                        <a href="#" class="btn btn-sm btn-primary">
                                            <i class="fas fa-eye"></i>
                                        </a>
                                        <a href="#" class="btn btn-sm btn-info">
                                            <i class="fas fa-download"></i>
                                        </a>
                                        <a href="#" class="btn btn-sm btn-secondary">
                                            <i class="fas fa-envelope"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>Laporan Penggunaan Obat</td>
                                <td>Inventaris</td>
                                <td>Bulanan</td>
                                <td>05-04-2025</td>
                                <td>PDF, Excel</td>
                                <td>
                                    <div class="btn-group">
                                        <a href="#" class="btn btn-sm btn-primary">
                                            <i class="fas fa-eye"></i>
                                        </a>
                                        <a href="#" class="btn btn-sm btn-info">
                                            <i class="fas fa-download"></i>
                                        </a>
                                        <a href="#" class="btn btn-sm btn-secondary">
                                            <i class="fas fa-envelope"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>Laporan Kehadiran Karyawan</td>
                                <td>Kepegawaian</td>
                                <td>Bulanan</td>
                                <td>05-04-2025</td>
                                <td>PDF, Excel</td>
                                <td>
                                    <div class="btn-group">
                                        <a href="#" class="btn btn-sm btn-primary">
                                            <i class="fas fa-eye"></i>
                                        </a>
                                        <a href="#" class="btn btn-sm btn-info">
                                            <i class="fas fa-download"></i>
                                        </a>
                                        <a href="#" class="btn btn-sm btn-secondary">
                                            <i class="fas fa-envelope"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td>Laporan Tingkat Hunian Rawat Inap</td>
                                <td>Operasional</td>
                                <td>Bulanan</td>
                                <td>05-04-2025</td>
                                <td>PDF, Excel</td>
                                <td>
                                    <div class="btn-group">
                                        <a href="#" class="btn btn-sm btn-primary">
                                            <i class="fas fa-eye"></i>
                                        </a>
                                        <a href="#" class="btn btn-sm btn-info">
                                            <i class="fas fa-download"></i>
                                        </a>
                                        <a href="#" class="btn btn-sm btn-secondary">
                                            <i class="fas fa-envelope"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>7</td>
                                <td>Laporan Biaya Operasional</td>
                                <td>Keuangan</td>
                                <td>Bulanan</td>
                                <td>05-04-2025</td>
                                <td>PDF, Excel</td>
                                <td>
                                    <div class="btn-group">
                                        <a href="#" class="btn btn-sm btn-primary">
                                            <i class="fas fa-eye"></i>
                                        </a>
                                        <a href="#" class="btn btn-sm btn-info">
                                            <i class="fas fa-download"></i>
                                        </a>
                                        <a href="#" class="btn btn-sm btn-secondary">
                                            <i class="fas fa-envelope"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <nav aria-label="Page navigation" class="mt-3">
                    <ul class="pagination justify-content-center">
                        <li class="page-item disabled">
                            <a class="page-link" href="#" tabindex="-1">Previous</a>
                        </li>
                        <li class="page-item active"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                        <li class="page-item">
                            <a class="page-link" href="#">Next</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-6 mb-4">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="card-title mb-0">Statistik Kunjungan 12 Bulan Terakhir</h5>
                <div class="dropdown">
                    <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                        Filter
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#">Rawat Jalan</a></li>
                        <li><a class="dropdown-item" href="#">Rawat Inap</a></li>
                        <li><a class="dropdown-item" href="#">UGD</a></li>
                        <li><a class="dropdown-item" href="#">Semua Kunjungan</a></li>
                    </ul>
                </div>
            </div>
            <div class="card-body">
                <canvas id="visitsChart" height="250"></canvas>
            </div>
        </div>
    </div>

    <div class="col-lg-6 mb-4">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="card-title mb-0">Distribusi Pasien per Departemen</h5>
                <div class="dropdown">
                    <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                        Filter
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#">Bulan Ini</a></li>
                        <li><a class="dropdown-item" href="#">3 Bulan Terakhir</a></li>
                        <li><a class="dropdown-item" href="#">6 Bulan Terakhir</a></li>
                        <li><a class="dropdown-item" href="#">12 Bulan Terakhir</a></li>
                    </ul>
                </div>
            </div>
            <div class="card-body">
                <canvas id="departmentDistributionChart" height="250"></canvas>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-6 mb-4">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="card-title mb-0">10 Diagnosa Terbanyak</h5>
                <div class="dropdown">
                    <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                        Filter
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#">Bulan Ini</a></li>
                        <li><a class="dropdown-item" href="#">3 Bulan Terakhir</a></li>
                        <li><a class="dropdown-item" href="#">6 Bulan Terakhir</a></li>
                        <li><a class="dropdown-item" href="#">12 Bulan Terakhir</a></li>
                    </ul>
                </div>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-sm">
                        <thead>
                            <tr>
                                <th>No.</th>
                                <th>Kode ICD</th>
                                <th>Diagnosa</th>
                                <th>Jumlah</th>
                                <th>Persentase</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>J06.9</td>
                                <td>Infeksi Saluran Pernapasan Akut</td>
                                <td>356</td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="me-2">18.5%</span>
                                        <div class="progress" style="height: 5px; width: 100px;">
                                            <div class="progress-bar bg-primary" role="progressbar" style="width: 18.5%"></div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>A09</td>
                                <td>Diare dan Gastroenteritis</td>
                                <td>289</td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="me-2">15.0%</span>
                                        <div class="progress" style="height: 5px; width: 100px;">
                                            <div class="progress-bar bg-primary" role="progressbar" style="width: 15.0%"></div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>I10</td>
                                <td>Hipertensi Esensial</td>
                                <td>254</td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="me-2">13.2%</span>
                                        <div class="progress" style="height: 5px; width: 100px;">
                                            <div class="progress-bar bg-primary" role="progressbar" style="width: 13.2%"></div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>E11</td>
                                <td>Diabetes Melitus Tipe 2</td>
                                <td>198</td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="me-2">10.3%</span>
                                        <div class="progress" style="height: 5px; width: 100px;">
                                            <div class="progress-bar bg-primary" role="progressbar" style="width: 10.3%"></div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>J45</td>
                                <td>Asma</td>
                                <td>176</td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="me-2">9.1%</span>
                                        <div class="progress" style="height: 5px; width: 100px;">
                                            <div class="progress-bar bg-primary" role="progressbar" style="width: 9.1%"></div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td>K29.7</td>
                                <td>Gastritis</td>
                                <td>145</td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="me-2">7.5%</span>
                                        <div class="progress" style="height: 5px; width: 100px;">
                                            <div class="progress-bar bg-primary" role="progressbar" style="width: 7.5%"></div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>7</td>
                                <td>M54.5</td>
                                <td>Nyeri Punggung Bawah</td>
                                <td>132</td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="me-2">6.9%</span>
                                        <div class="progress" style="height: 5px; width: 100px;">
                                            <div class="progress-bar bg-primary" role="progressbar" style="width: 6.9%"></div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="text-end mt-2">
                    <a href="#" class="btn btn-sm btn-outline-primary">Lihat Semua Data</a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-6 mb-4">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="card-title mb-0">Analitik Keuangan</h5>
                <div class="dropdown">
                    <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                        Filter
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#">3 Bulan Terakhir</a></li>
                        <li><a class="dropdown-item" href="#">6 Bulan Terakhir</a></li>
                        <li><a class="dropdown-item" href="#">12 Bulan Terakhir</a></li>
                    </ul>
                </div>
            </div>
            <div class="card-body">
                <div class="row mb-4">
                    <div class="col-md-6">
                        <canvas id="revenueExpenseChart" height="150"></canvas>
                    </div>
                    <div class="col-md-6">
                        <div class="card border-left-success shadow h-100">
                            <div class="card-body py-2">
                                <div class="row no-gutters align-items-center">
                                    <div class="col mr-2">
                                        <div class="text-xs font-weight-bold text-success text-uppercase mb-1">Margin Operasional</div>
                                        <div class="h5 mb-0 font-weight-bold text-gray-800">23.5%</div>
                                    </div>
                                    <div class="col-auto">
                                        <i class="fas fa-percentage fa-2x text-gray-300"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card border-left-primary shadow h-100 mt-2">
                            <div class="card-body py-2">
                                <div class="row no-gutters align-items-center">
                                    <div class="col mr-2">
                                        <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Rata-rata Pendapatan per Pasien</div>
                                        <div class="h5 mb-0 font-weight-bold text-gray-800">Rp 453,500</div>
                                    </div>
                                    <div class="col-auto">
                                        <i class="fas fa-user-plus fa-2x text-gray-300"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card border-left-warning shadow h-100 mt-2">
                            <div class="card-body py-2">
                                <div class="row no-gutters align-items-center">
                                    <div class="col mr-2">
                                        <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">Tagihan Belum Lunas</div>
                                        <div class="h5 mb-0 font-weight-bold text-gray-800">Rp 145,320,000</div>
                                    </div>
                                    <div class="col-auto">
                                        <i class="fas fa-file-invoice-dollar fa-2x text-gray-300"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table table-sm">
                        <thead>
                            <tr>
                                <th>Periode</th>
                                <th class="text-end">Pendapatan</th>
                                <th class="text-end">Pengeluaran</th>
                                <th class="text-end">Profit</th>
                                <th class="text-end">Margin</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>April 2025</td>
                                <td class="text-end">Rp 325,000,000</td>
                                <td class="text-end">Rp 248,625,000</td>
                                <td class="text-end">Rp 76,375,000</td>
                                <td class="text-end">23.5%</td>
                            </tr>
                            <tr>
                                <td>Maret 2025</td>
                                <td class="text-end">Rp 318,500,000</td>
                                <td class="text-end">Rp 235,890,000</td>
                                <td class="text-end">Rp 82,610,000</td>
                                <td class="text-end">25.9%</td>
                            </tr>
                            <tr>
                                <td>Februari 2025</td>
                                <td class="text-end">Rp 295,750,000</td>
                                <td class="text-end">Rp 228,728,750</td>
                                <td class="text-end">Rp 67,021,250</td>
                                <td class="text-end">22.7%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="text-end mt-2">
                    <a href="#" class="btn btn-sm btn-outline-primary">Lihat Laporan Lengkap</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-12 mb-4">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="card-title mb-0">Dashboard Analitik</h5>
                <div class="btn-group">
                    <button type="button" class="btn btn-sm btn-outline-secondary active">Hari Ini</button>
                    <button type="button" class="btn btn-sm btn-outline-secondary">Minggu Ini</button>
                    <button type="button" class="btn btn-sm btn-outline-secondary">Bulan Ini</button>
                    <button type="button" class="btn btn-sm btn-outline-secondary">Kustom</button>
                </div>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="card border-left-primary">
                            <div class="card-body py-3">
                                <div class="row no-gutters align-items-center">
                                    <div class="col mr-2">
                                        <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                            Kunjungan Poli Umum</div>
                                        <div class="h5 mb-0 font-weight-bold text-gray-800">42</div>
                                    </div>
                                    <div class="col-auto">
                                        <i class="fas fa-stethoscope fa-2x text-gray-300"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="card border-left-success">
                            <div class="card-body py-3">
                                <div class="row no-gutters align-items-center">
                                    <div class="col mr-2">
                                        <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                            Kunjungan UGD</div>
                                        <div class="h5 mb-0 font-weight-bold text-gray-800">18</div>
                                    </div>
                                    <div class="col-auto">
                                        <i class="fas fa-ambulance fa-2x text-gray-300"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="card border-left-info">
                            <div class="card-body py-3">
                                <div class="row no-gutters align-items-center">
                                    <div class="col mr-2">
                                        <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                                            Pasien Rawat Inap</div>
                                        <div class="h5 mb-0 font-weight-bold text-gray-800">24</div>
                                    </div>
                                    <div class="col-auto">
                                        <i class="fas fa-procedures fa-2x text-gray-300"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="card border-left-warning">
                            <div class="card-body py-3">
                                <div class="row no-gutters align-items-center">
                                    <div class="col mr-2">
                                        <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                            Operasi Hari Ini</div>
                                        <div class="h5 mb-0 font-weight-bold text-gray-800">7</div>
                                    </div>
                                    <div class="col-auto">
                                        <i class="fas fa-user-md fa-2x text-gray-300"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-8 mb-4">
                        <h6 class="mb-3">Pola Kunjungan Per Jam</h6>
                        <canvas id="hourlyVisitsChart" height="200"></canvas>
                    </div>
                    <div class="col-lg-4 mb-4">
                        <h6 class="mb-3">Kunjungan per Usia & Gender</h6>
                        <canvas id="ageGenderChart" height="200"></canvas>
                    </div>
                </div>

                <div class="row mt-3">
                    <div class="col-md-6">
                        <h6 class="mb-3">Rata-rata Waktu Tunggu per Departemen (Menit)</h6>
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>Departemen</th>
                                        <th>Waktu Tunggu</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>                                    <tr>
                                        <td>Poli Umum</td>
                                        <td>32 menit</td>
                                        <td><span class="badge bg-warning">Sedang</span></td>
                                    </tr>
                                    <tr>
                                        <td>Poli Gigi</td>
                                        <td>25 menit</td>
                                        <td><span class="badge bg-success">Baik</span></td>
                                    </tr>
                                    <tr>
                                        <td>Poli Anak</td>
                                        <td>45 menit</td>
                                        <td><span class="badge bg-danger">Padat</span></td>
                                    </tr>
                                    <tr>
                                        <td>Laboratorium</td>
                                        <td>18 menit</td>
                                        <td><span class="badge bg-success">Baik</span></td>
                                    </tr>
                                    <tr>
                                        <td>Radiologi</td>
                                        <td>22 menit</td>
                                        <td><span class="badge bg-success">Baik</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="mb-3">Status Kamar & Tempat Tidur</h6>
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>Kelas</th>
                                        <th>Tersedia</th>
                                        <th>Terisi</th>
                                        <th>Okupansi</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>VIP</td>
                                        <td>3</td>
                                        <td>5</td>
                                        <td>
                                            <div class="progress" style="height: 5px;">
                                                <div class="progress-bar bg-success" role="progressbar" style="width: 62.5%"></div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Kelas I</td>
                                        <td>2</td>
                                        <td>8</td>
                                        <td>
                                            <div class="progress" style="height: 5px;">
                                                <div class="progress-bar bg-danger" role="progressbar" style="width: 80%"></div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Kelas II</td>
                                        <td>5</td>
                                        <td>12</td>
                                        <td>
                                            <div class="progress" style="height: 5px;">
                                                <div class="progress-bar bg-warning" role="progressbar" style="width: 70.6%"></div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Kelas III</td>
                                        <td>8</td>
                                        <td>20</td>
                                        <td>
                                            <div class="progress" style="height: 5px;">
                                                <div class="progress-bar bg-warning" role="progressbar" style="width: 71.4%"></div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>ICU</td>
                                        <td>1</td>
                                        <td>5</td>
                                        <td>
                                            <div class="progress" style="height: 5px;">
                                                <div class="progress-bar bg-danger" role="progressbar" style="width: 83.3%"></div>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Create Report Modal -->
<div class="modal fade" id="createReportModal" tabindex="-1" aria-labelledby="createReportModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="createReportModalLabel">Buat Laporan Baru</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="createReportForm">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="reportName" class="form-label">Nama Laporan</label>
                            <input type="text" class="form-control" id="reportName" required>
                        </div>
                        <div class="col-md-6">
                            <label for="reportCategory" class="form-label">Kategori</label>
                            <select class="form-select" id="reportCategory" required>
                                <option value="">Pilih Kategori...</option>
                                <option value="operational">Operasional</option>
                                <option value="financial">Keuangan</option>
                                <option value="clinical">Klinis</option>
                                <option value="inventory">Inventaris</option>
                                <option value="hr">Kepegawaian</option>
                                <option value="rl1">RL 1 - Data Dasar RS</option>
                                <option value="rl2">RL 2 - Ketenagaan RS</option>
                                <option value="rl3">RL 3 - Pelayanan RS</option>
                                <option value="rl4">RL 4 - Morbiditas/Mortalitas</option>
                                <option value="rl5">RL 5 - Bulanan</option>
                            </select>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="reportPeriod" class="form-label">Periode</label>
                            <select class="form-select" id="reportPeriod" required>
                                <option value="">Pilih Periode...</option>
                                <option value="daily">Harian</option>
                                <option value="weekly">Mingguan</option>
                                <option value="monthly">Bulanan</option>
                                <option value="quarterly">Triwulan</option>
                                <option value="yearly">Tahunan</option>
                                <option value="custom">Kustom</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="reportFormat" class="form-label">Format Output</label>
                            <div class="mt-2">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="formatPDF" value="pdf" checked>
                                    <label class="form-check-label" for="formatPDF">PDF</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="formatExcel" value="excel" checked>
                                    <label class="form-check-label" for="formatExcel">Excel</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="formatCSV" value="csv">
                                    <label class="form-check-label" for="formatCSV">CSV</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mb-3" id="customDateRange" style="display: none;">
                        <div class="col-md-6">
                            <label for="reportStartDate" class="form-label">Tanggal Mulai</label>
                            <input type="date" class="form-control" id="reportStartDate">
                        </div>
                        <div class="col-md-6">
                            <label for="reportEndDate" class="form-label">Tanggal Selesai</label>
                            <input type="date" class="form-control" id="reportEndDate">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="reportDescription" class="form-label">Deskripsi Laporan</label>
                        <textarea class="form-control" id="reportDescription" rows="3"></textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Pilih Data yang Akan Ditampilkan</label>
                        <div class="card">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="showSummary" checked>
                                            <label class="form-check-label" for="showSummary">Ringkasan</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="showDetails" checked>
                                            <label class="form-check-label" for="showDetails">Detail</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="showTrends" checked>
                                            <label class="form-check-label" for="showTrends">Tren</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="showCharts" checked>
                                            <label class="form-check-label" for="showCharts">Grafik</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="showTables" checked>
                                            <label class="form-check-label" for="showTables">Tabel</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="showAnalysis">
                                            <label class="form-check-label" for="showAnalysis">Analisis</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="showComparisons">
                                            <label class="form-check-label" for="showComparisons">Perbandingan</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="showForecasts">
                                            <label class="form-check-label" for="showForecasts">Proyeksi</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="showKPIs" checked>
                                            <label class="form-check-label" for="showKPIs">KPI</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="scheduleReport">
                            <label class="form-check-label" for="scheduleReport">
                                Jadwalkan laporan ini
                            </label>
                        </div>
                    </div>
                    <div id="scheduleOptions" style="display: none;">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="scheduleFrequency" class="form-label">Frekuensi</label>
                                <select class="form-select" id="scheduleFrequency">
                                    <option value="daily">Harian</option>
                                    <option value="weekly">Mingguan</option>
                                    <option value="monthly">Bulanan</option>
                                    <option value="quarterly">Triwulan</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="deliveryMethod" class="form-label">Metode Pengiriman</label>
                                <select class="form-select" id="deliveryMethod">
                                    <option value="email">Email</option>
                                    <option value="download">Download Link</option>
                                    <option value="both">Keduanya</option>
                                </select>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="recipientEmail" class="form-label">Email Penerima</label>
                            <input type="email" class="form-control" id="recipientEmail" placeholder="Pisahkan dengan koma untuk beberapa penerima">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                <button type="button" class="btn btn-primary" id="generateReportBtn">Buat Laporan</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize charts
        const visitsCtx = document.getElementById('visitsChart').getContext('2d');
        const visitsChart = new Chart(visitsCtx, {
            type: 'line',
            data: {
                labels: ['Mei 2024', 'Jun 2024', 'Jul 2024', 'Agu 2024', 'Sep 2024', 'Okt 2024', 
                         'Nov 2024', 'Des 2024', 'Jan 2025', 'Feb 2025', 'Mar 2025', 'Apr 2025'],
                datasets: [{
                    label: 'Kunjungan',
                    data: [980, 1050, 1120, 1090, 1150, 1210, 1180, 1240, 1190, 1170, 1230, 1254],
                    fill: false,
                    borderColor: '#4e73df',
                    tension: 0.1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false
            }
        });

        const deptDistCtx = document.getElementById('departmentDistributionChart').getContext('2d');
        const deptDistChart = new Chart(deptDistCtx, {
            type: 'pie',
            data: {
                labels: ['Poli Umum', 'Poli Gigi', 'Poli Anak', 'Poli Penyakit Dalam', 'Poli Bedah', 'Poli Mata', 'UGD', 'Lainnya'],
                datasets: [{
                    data: [25, 12, 18, 15, 10, 8, 7, 5],
                    backgroundColor: [
                        '#4e73df',
                        '#1cc88a',
                        '#36b9cc',
                        '#f6c23e',
                        '#e74a3b',
                        '#6f42c1',
                        '#fd7e14',
                        '#6c757d'
                    ]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false
            }
        });

        const revExpCtx = document.getElementById('revenueExpenseChart').getContext('2d');
        const revExpChart = new Chart(revExpCtx, {
            type: 'bar',
            data: {
                labels: ['Feb', 'Mar', 'Apr'],
                datasets: [
                    {
                        label: 'Pendapatan',
                        data: [295750000, 318500000, 325000000],
                        backgroundColor: '#1cc88a'
                    },
                    {
                        label: 'Pengeluaran',
                        data: [228728750, 235890000, 248625000],
                        backgroundColor: '#e74a3b'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            callback: function(value) {
                                return 'Rp ' + (value / 1000000) + ' jt';
                            }
                        }
                    }
                }
            }
        });

        // Dashboard analytics charts
        const hourlyVisitsCtx = document.getElementById('hourlyVisitsChart').getContext('2d');
        const hourlyVisitsChart = new Chart(hourlyVisitsCtx, {
            type: 'line',
            data: {
                labels: ['07:00', '08:00', '09:00', '10:00', '11:00', '12:00', '13:00', '14:00', 
                         '15:00', '16:00', '17:00', '18:00', '19:00', '20:00', '21:00', '22:00'],
                datasets: [
                    {
                        label: 'Poli Umum',
                        data: [5, 8, 12, 10, 8, 5, 9, 11, 7, 6, 4, 2, 1, 0, 0, 0],
                        borderColor: '#4e73df',
                        backgroundColor: 'rgba(78, 115, 223, 0.1)',
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: 'UGD',
                        data: [2, 1, 2, 1, 1, 2, 1, 1, 0, 2, 1, 0, 3, 1, 2, 1],
                        borderColor: '#e74a3b',
                        backgroundColor: 'rgba(231, 74, 59, 0.1)',
                        fill: true,
                        tension: 0.4
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            precision: 0
                        }
                    }
                }
            }
        });

        const ageGenderCtx = document.getElementById('ageGenderChart').getContext('2d');
        const ageGenderChart = new Chart(ageGenderCtx, {
            type: 'bar',
            data: {
                labels: ['0-17', '18-30', '31-45', '46-60', '60+'],
                datasets: [
                    {
                        label: 'Laki-laki',
                        data: [12, 15, 18, 25, 20],
                        backgroundColor: '#4e73df'
                    },
                    {
                        label: 'Perempuan',
                        data: [15, 20, 22, 18, 16],
                        backgroundColor: '#e74a3b'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            precision: 0
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Kelompok Usia'
                        }
                    }
                }
            }
        });

        // Handle period selection in create report modal
        document.getElementById('reportPeriod').addEventListener('change', function() {
            const customDateRange = document.getElementById('customDateRange');
            if (this.value === 'custom') {
                customDateRange.style.display = 'flex';
            } else {
                customDateRange.style.display = 'none';
            }
        });

        // Handle schedule report checkbox
        document.getElementById('scheduleReport').addEventListener('change', function() {
            const scheduleOptions = document.getElementById('scheduleOptions');
            if (this.checked) {
                scheduleOptions.style.display = 'block';
            } else {
                scheduleOptions.style.display = 'none';
            }
        });

        // Generate report button
        document.getElementById('generateReportBtn').addEventListener('click', function() {
            alert('Laporan berhasil dibuat dan dapat diakses di daftar laporan.');
            bootstrap.Modal.getInstance(document.getElementById('createReportModal')).hide();
        });
    });
</script>
{% endblock %}